<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Order</title>
    <link rel="icon" href="../assets/LOGO.png" type="image/png">
    <link rel="stylesheet" href="../css/style.css">
    <style>
        #cartTable td, #cartTable th {
            padding: 10px; /* Adjust the value as needed */
            text-align: left; /* Optional: Align text to the left */
        }
    </style>
</head>

<body>

<header>
    <img src="../assets/LOGO.png" alt="Logo" width="100" height="100">
    <nav style="display:flex; gap: 20px; align-items: center;">
        <a href="../index.html">HOME</a>
        <a href="about.html">ABOUT US</a>

        <select onchange="location = this.value;">
            <option value="">Services</option>
            <option value="design.html">Design</option>
            <option id="ordersOption" value="orders.html" disabled>Orders</option>
        </select>

        <a href="EcoEdu.html">Eco-Education</a>
        <a href="contact.html">CONTACT US</a>
        
        <input type="text" id="searchInput">
        <button onclick="searchSite()">Search</button>  
    </nav>

    <div class="brand">
        <div style="text-align: center;">
            <div>FASHION APPAREL</div>
            <div class="muted">Modern clothing & essentials</div>
        </div>
    </div>
</header>


<!-- MAIN PAGE CONTENT -->
<div class="container">
    <h2>Checkout</h2>

    <!-- CART SECTION -->
    <div class="section">
        <h3>Your Cart</h3>

        <table id="cartTable">
            <tr>
                <th>Item </th>
                <th>Image </th>
                <th>Size </th>
                <th>Quantity </th>
                <th>Price </th>
                <th>Subtotal </th>
            </tr>
        </table>
    </div>


    <!-- SHIPPING INFO -->
    <div class="section">
        <h3>Shipping Information</h3>
        <form>
            <table>
                <tr><td><label>Full Name <input type="text"></label></td></tr>
                <tr><td><label>Address <input type="text"></label></td></tr>
                <tr><td><label>City <input type="text"></label></td></tr>
                <tr><td><label>Postal Code <input type="text"></label></td></tr>
                <tr><td><label>Country <input type="text"></label></td></tr>
                <tr><td><label>Phone <input type="text"></label></td></tr>
            </table>
        </form>
    </div>


    <!-- PAYMENT INFO -->
    <div class="section">
        <h3>Payment Information</h3>
        <form>
            <table>
                <tr><td><label>Card Number <input type="text"></label></td></tr>
                <tr><td><label>Expiry Date <input type="text" placeholder="MM/YY"></label></td></tr>
                <tr><td><label>CVV <input type="text"></label></td></tr>
            </table>
        </form>
    </div>

    <button type="submit"><a href="OrderSuccess.html">Place Order</a></button>
</div>


<footer>
    <div class="container footer-grid">
        <div>
            <div style="font-weight:800">FashionApparel</div>
            <div class="muted">Simple clothing, thoughtful design.</div>
        </div>

        <div style="text-align:center">
            <div class="muted">&copy; FashionApparel 2025</div>
            <div style="margin-top:8px">Follow us: Instagram • Facebook • X</div>
        </div>
    </div>
</footer>

<!-- CART SCRIPT — FULL FUNCTION BELOW -->
<script>
    function loadCart() {
        let cart = JSON.parse(localStorage.getItem("cart")) || [];
        let table = document.getElementById("cartTable");

        // Reset table (keep header)
        table.innerHTML = `
            <tr>
                <th>Item</th>
                <th> Image</th>
                <th> Size</th>
                <th> Quantity</th>
                <th> Price</th>
                <th> Subtotal</th>
            </tr>
        `;

        let total = 0;

        if (cart.length === 0) {
            // Handle empty cart case
            table.innerHTML += `
                <tr>
                    <td colspan="6" style="text-align:center;">Your cart is empty.</td>
                </tr>
            `;
            return; // Exit the function if the cart is empty
        }

        cart.forEach(item => {
            let rawPrice = item.price.toString().replace("R", "");
            let priceValue = parseFloat(rawPrice);
            let subtotal = priceValue * item.quantity; // Use item.quantity instead of item.qty
            total += subtotal;

            table.innerHTML += `
                <tr>
                    <td>${item.name}</td>
                    <td> <img src="${item.image}" width="60"></td>
                    <td> ${item.size}</td>
                    <td> ${item.quantity}</td>
                    <td> ${item.price}</td>
                    <td> R${subtotal.toFixed(2)}</td> <!-- Format subtotal to 2 decimal places -->
                    <td> <button onclick="removeFromCart(${cart.indexOf(item)})">Remove</button></td>
                </tr>
            `;
        });

        // TOTAL ROW
        table.innerHTML += `
            <tr>
                <td colspan="5" class="total">Total</td>
                <td class="total">R${total.toFixed(2)}</td> <!-- Format total to 2 decimal places -->
            </tr>
        `;
    }

    // LOAD CART WHEN PAGE OPENS
    loadCart();
</script>

<script>
    function removeFromCart(index) {
        let cart = JSON.parse(localStorage.getItem("cart")) || [];
        cart.splice(index, 1); // Remove item at index
        localStorage.setItem("cart", JSON.stringify(cart));
        loadCart(); // Refresh cart display
    }

</script>
<script src="../Users.js"></script>

</body>
</html>
